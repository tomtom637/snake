var C=Object.defineProperty;var q=(o,r,f)=>r in o?C(o,r,{enumerable:!0,configurable:!0,writable:!0,value:f}):o[r]=f;var u=(o,r,f)=>(q(o,typeof r!="symbol"?r+"":r,f),f);(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&e(h)}).observe(document,{childList:!0,subtree:!0});function f(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function e(t){if(t.ep)return;t.ep=!0;const i=f(t);fetch(t.href,i)}})();function A(o,r,f,e){o.fillStyle="green",f.forEach(t=>{o.fillRect(t[0]*e,t[1]*e,e,e)}),o.strokeStyle="aquamarine",f.forEach(t=>{o.strokeRect(t[0]*e,t[1]*e,e,e)})}function F(o,r,f,e){const t=e/4;o.fillStyle="green",o.strokeStyle="aquamarine",f.forEach((i,h)=>{h===0&&(o.fillRect(i[0]*e+t/2,i[1]*e+t/2,e-t,e-t),o.strokeRect(i[0]*e+t/2,i[1]*e+t/2,e-t,e-t)),h!==0&&(i[2]==="right"&&f[h-1][2]==="up"&&(o.fillRect(i[0]*e,i[1]*e+t,t,t*2),o.fillRect(i[0]*e+t,i[1]*e+t,t*2,t*2),o.fillRect(i[0]*e+t,i[1]*e,t*2,t),o.strokeRect(i[0]*e+t,i[1]*e+t,t*2,t*2)),i[2]==="right"&&f[h-1][2]==="down"&&(o.fillRect(i[0]*e,i[1]*e+t,t,t*2),o.fillRect(i[0]*e+t,i[1]*e+t,t*2,t*2),o.fillRect(i[0]*e+t,i[1]*e+t*3,t*2,t),o.strokeRect(i[0]*e+t,i[1]*e+t,t*2,t*2)),i[2]==="right"&&f[h-1][2]==="right"&&(o.fillRect(i[0]*e,i[1]*e+t,t,t*2),o.fillRect(i[0]*e+t,i[1]*e+t,t*2,t*2),o.fillRect(i[0]*e+t*3,i[1]*e+t,t,t*2),o.strokeRect(i[0]*e+t,i[1]*e+t,t*2,t*2)),i[2]==="left"&&f[h-1][2]==="up"&&(o.fillRect(i[0]*e+t*3,i[1]*e+t,t,t*2),o.fillRect(i[0]*e+t,i[1]*e+t,t*2,t*2),o.fillRect(i[0]*e+t,i[1]*e,t*2,t),o.strokeRect(i[0]*e+t,i[1]*e+t,t*2,t*2)),i[2]==="left"&&f[h-1][2]==="down"&&(o.fillRect(i[0]*e+t*3,i[1]*e+t,t,t*2),o.fillRect(i[0]*e+t,i[1]*e+t,t*2,t*2),o.fillRect(i[0]*e+t,i[1]*e+t*3,t*2,t),o.strokeRect(i[0]*e+t,i[1]*e+t,t*2,t*2)),i[2]==="left"&&f[h-1][2]==="left"&&(o.fillRect(i[0]*e+t*3,i[1]*e+t,t,t*2),o.fillRect(i[0]*e+t,i[1]*e+t,t*2,t*2),o.fillRect(i[0]*e,i[1]*e+t,t,t*2),o.strokeRect(i[0]*e+t,i[1]*e+t,t*2,t*2)),i[2]==="up"&&f[h-1][2]==="right"&&(o.fillRect(i[0]*e+t,i[1]*e+t*3,t*2,t),o.fillRect(i[0]*e+t,i[1]*e+t,t*2,t*2),o.fillRect(i[0]*e+t*3,i[1]*e+t,t,t*2),o.strokeRect(i[0]*e+t,i[1]*e+t,t*2,t*2)),i[2]==="up"&&f[h-1][2]==="left"&&(o.fillRect(i[0]*e+t,i[1]*e+t*3,t*2,t),o.fillRect(i[0]*e+t,i[1]*e+t,t*2,t*2),o.fillRect(i[0]*e,i[1]*e+t,t,t*2),o.strokeRect(i[0]*e+t,i[1]*e+t,t*2,t*2)),i[2]==="up"&&f[h-1][2]==="up"&&(o.fillRect(i[0]*e+t,i[1]*e+t*3,t*2,t),o.fillRect(i[0]*e+t,i[1]*e+t,t*2,t*2),o.fillRect(i[0]*e+t,i[1]*e,t*2,t),o.strokeRect(i[0]*e+t,i[1]*e+t,t*2,t*2)),i[2]==="down"&&f[h-1][2]==="right"&&(o.fillRect(i[0]*e+t,i[1]*e,t*2,t),o.fillRect(i[0]*e+t,i[1]*e+t,t*2,t*2),o.fillRect(i[0]*e+t*3,i[1]*e+t,t,t*2),o.strokeRect(i[0]*e+t,i[1]*e+t,t*2,t*2)),i[2]==="down"&&f[h-1][2]==="left"&&(o.fillRect(i[0]*e+t,i[1]*e,t*2,t),o.fillRect(i[0]*e+t,i[1]*e+t,t*2,t*2),o.fillRect(i[0]*e,i[1]*e+t,t,t*2),o.strokeRect(i[0]*e+t,i[1]*e+t,t*2,t*2)),i[2]==="down"&&f[h-1][2]==="down"&&(o.fillRect(i[0]*e+t,i[1]*e,t*2,t),o.fillRect(i[0]*e+t,i[1]*e+t,t*2,t*2),o.fillRect(i[0]*e+t,i[1]*e+t*3,t*2,t),o.strokeRect(i[0]*e+t,i[1]*e+t,t*2,t*2)))})}class I{constructor(){u(this,"bufferedInputs");u(this,"direction");u(this,"scale");u(this,"body");u(this,"score");u(this,"dead");u(this,"foodPosition");u(this,"style");this.bufferedInputs=[],this.direction="right",this.scale=40,this.body=[[s.width/(2*this.scale),s.width/(2*this.scale),"right"],[s.width/(2*this.scale)-this.scale,s.width/(2*this.scale),"right"],[s.width/(2*this.scale)-this.scale-this.scale,s.width/(2*this.scale),"right"]],this.score=0,this.dead=!1,this.updateFoodPosition(),this.style="thin",this.foodPosition=[~~(Math.random()*s.width/this.scale)*this.scale,~~(Math.random()*s.height/this.scale)*this.scale]}drawSnake(){if(d)switch(this.style){case"retro":A(d,s,this.body,this.scale);break;case"thin":F(d,s,this.body,this.scale);break}}updateSnake(){const r=this.body[0];switch(this.direction){case"right":this.body.unshift([r[0]+1,r[1],"right"]),this.body[0][0]===s.width/this.scale&&(this.body[0][0]=0);break;case"left":this.body.unshift([r[0]-1,r[1],"left"]),this.body[0][0]===-1&&(this.body[0][0]=s.width/this.scale-1);break;case"up":this.body.unshift([r[0],r[1]-1,"up"]),this.body[0][1]===-1&&(this.body[0][1]=s.height/this.scale-1);break;case"down":this.body.unshift([r[0],r[1]+1,"down"]),this.body[0][1]===s.height/this.scale&&(this.body[0][1]=0);break}this.body.pop()}drawFood(){if(d)switch(this.style){case"retro":d.fillStyle="#f00",d.fillRect(this.foodPosition[0]+this.scale/4,this.foodPosition[1]+this.scale/4,this.scale-this.scale/2,this.scale-this.scale/2);break;case"thin":d.fillStyle="#b00",d.fillRect(this.foodPosition[0]+this.scale/3,this.foodPosition[1]+this.scale/3,this.scale-this.scale/1.5,this.scale-this.scale/1.5);break}}updateFoodPosition(){this.foodPosition=[~~(Math.random()*s.width/this.scale)*this.scale,~~(Math.random()*s.height/this.scale)*this.scale],this.body.some(r=>r[0]*this.scale===this.foodPosition[0]&&r[1]*this.scale===this.foodPosition[1])&&this.updateFoodPosition()}eat(){this.body[0][0]===this.foodPosition[0]/this.scale&&this.body[0][1]===this.foodPosition[1]/this.scale&&(this.body.push(this.body[this.body.length-1]),this.updateFoodPosition(),this.drawFood(),this.score+=5,c&&(c.textContent=this.score.toString()))}checkCollision(){const r=this.body[0];this.body.slice(1).forEach(e=>{e[0]===r[0]&&e[1]===r[1]&&(this.score>S&&(window.localStorage.setItem("highScore",this.score.toString()),a&&(a.textContent=this.score.toString())),this.dead=!0)})}}const b=window.localStorage.getItem("highscore"),S=b?parseInt(b):0,s=document.createElement("canvas"),d=s.getContext("2d"),a=document.querySelector(".high-score"),c=document.querySelector(".score"),R=document.getElementById("app");a&&(a.textContent=S.toString());c&&(c.textContent="0");s.classList.add("canvas");s.width=800;s.height=800;s.style.width=s.width/2+"px";s.style.height=s.height/2+"px";R&&R.append(s);const g=document.querySelector(".game-over"),p=document.querySelector(".game-over__message"),m=document.querySelector(".game-over__btn");m&&m.addEventListener("click",v);function v(){!g||!c||(g.classList.add("hidden"),c.textContent="0",n=new I)}function l(o){o.key==="Enter"&&(document.removeEventListener("keydown",l),v())}let w=0;function O(){!d||!p||!g||(d.clearRect(0,0,s.width,s.height),w++,w%4===0&&(Math.random()>.5?p.textContent+="s":p.textContent+="S",p.textContent&&(p.textContent=p.textContent.slice(1))),g.classList.remove("hidden"),document.addEventListener("keydown",l))}let n=new I;const E={slow:10,normal:7,fast:5,insane:2};let P=E.normal,y=0,k=0;function L(o){if(!d)return;y++;const r=o-k;k=o,n.dead?O():y%Math.round(16*P/r)===0&&(d.clearRect(0,0,s.width,s.height),n.updateSnake(),n.drawFood(),n.drawSnake(),n.eat(),n.checkCollision(),n.direction=n.bufferedInputs[0]||n.direction,n.bufferedInputs.shift()),requestAnimationFrame(L)}requestAnimationFrame(L);document.addEventListener("keydown",o=>{if(!(n.bufferedInputs.length>2))switch(o.key){case"ArrowUp":if(n.bufferedInputs.length!==0){if(n.bufferedInputs[n.bufferedInputs.length-1]==="down"||n.bufferedInputs[n.bufferedInputs.length-1]==="up")return;n.bufferedInputs.push("up")}else n.direction!=="down"&&n.direction!=="up"&&n.bufferedInputs.push("up");break;case"ArrowDown":if(n.bufferedInputs.length!==0){if(n.bufferedInputs[n.bufferedInputs.length-1]==="up"||n.bufferedInputs[n.bufferedInputs.length-1]==="down")return;n.bufferedInputs.push("down")}else n.direction!=="up"&&n.direction!=="down"&&n.bufferedInputs.push("down");break;case"ArrowLeft":if(n.bufferedInputs.length!==0){if(n.bufferedInputs[n.bufferedInputs.length-1]==="right"||n.bufferedInputs[n.bufferedInputs.length-1]==="left")return;n.bufferedInputs.push("left")}else n.direction!=="right"&&n.direction!=="left"&&n.bufferedInputs.push("left");break;case"ArrowRight":if(n.bufferedInputs.length!==0){if(n.bufferedInputs[n.bufferedInputs.length-1]==="left"||n.bufferedInputs[n.bufferedInputs.length-1]==="right")return;n.bufferedInputs.push("right")}else n.direction!=="left"&&n.direction!=="right"&&n.bufferedInputs.push("right");break}});const M=document.querySelectorAll("[data-speed]");M.forEach(o=>{o.addEventListener("click",r=>{r.target instanceof HTMLDivElement&&r.target.dataset.speed&&(P=E[r.target.dataset.speed])})});
